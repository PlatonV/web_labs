<!DOCTYPE html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>
<body>
  <div id="target">
    <p id="text">aspdoifjw qwef asdf asdf oiqjwepfoij asdfas asdf qeoipjqwepfo iqwef.</p>
  </div>

  <script language="javascript">
  function getRandomColor() {
    var letters = '0123456789ABCDEF';
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
  }
  String.prototype.replaceAll = function(search, replacement) {
    var target = this;
    var result = "";
    target.split(search).forEach(function (part) {
      result = result + part + '<span style="background-color:' + getRandomColor() + '">' + search + '</span>';
    });
    return result;
  };
  var originalText = $('#text').html();
  $("#target").dblclick(function () {
    var term = window.getSelection().toString();
    var txt = originalText.replaceAll(term,'<span style="background-color:' + getRandomColor() + '">' + term + "</span>");
    $('#text').html(txt);
    $('#text').children().last().remove();
  });
  </script>
</body>
